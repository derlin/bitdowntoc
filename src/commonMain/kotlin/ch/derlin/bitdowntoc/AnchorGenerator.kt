package ch.derlin.bitdowntoc

enum class AnchorAlgorithm {
    DEFAULT, DEVTO;

    fun toAnchor(title: String, concatSpaces: Boolean = true): String = when (this) {
        DEVTO -> DevToAnchorGenerator.toAnchor(title)
        else -> DefaultAnchorGenerator.toAnchor(title)
    }
        .let { if (concatSpaces) it.concatSpaces() else it } // usually, concatSpace is only false for GitHub

    fun escapeTitle(title: String) =
        title.stripMarkdownLinks()
}


interface AnchorGenerator {
    fun toAnchor(title: String): String
}

object DefaultAnchorGenerator : AnchorGenerator {

    private val nonLatinCharactersRegex = // \\p{IsLatin} doesn't work in JVM. - ʻ = U+2BB  ˮ = U+02EE  ꞌ = U+A78C.
        Regex("[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00f6\\u00f8-\\u00ff\\u02BB\\u02EE\\uA78C\\d\\s_-]")

    override fun toAnchor(title: String): String =
        title
            .lowercase()
            // text in `` is sanitized (no special chars), but the text is kept
            .transformInlineCode { it.stripNonLatinCharacters() }
            // other HTML tags <*> are removed
            .stripHtmlTags()
            // for markdown links [a](b), only the text "a" part is kept
            .stripMarkdownLinks()
            // the trim happens before removing characters, so text ending with e.g. " !" will have a trailing "-"
            .trim()
            // everything but letters, digits, dashes and some quotes are removed
            .stripNonLatinCharacters()
            // finally, spaces are converted to dashes
            // (+ consecutive spaces are merged into one on GitLab, but this is done by the calling function)
            .spacesToDash()

    fun String.stripNonLatinCharacters() =
        replace(nonLatinCharactersRegex, "")
}


object DevToAnchorGenerator : AnchorGenerator {
    /**
     * The actual implementation is here: https://github.com/forem/forem/blob/main/app/lib/redcarpet/render/html_rouge.rb
     * ```ruby
     * def slugify(string)
     *   stripped_string = ActionView::Base.full_sanitizer.sanitize string
     *   stripped_string.downcase.gsub(EmojiRegex::RGIEmoji, "").strip.gsub(/[[:punct:]]/u, "").gsub(/\s+/, "-")
     *  end
     * ```
     *
     * IMPORTANT: dev.to doesn't handle duplicate anchors (it just adds the same ID multiple times) !
     **/

    // this regex was created by (1) taking the regex of all emojis (https://github.com/sweaver2112/Regex-combined-emojis),
    // (2) putting it into a dev.to title, (3) taking the generated anchor and (4) removing the preserved emojis in 3 from the regex in 1.
    // -> list of all stripped emojis
    private val removedEmojisRegex = Regex(
        "🧑🏻‍️‍💋‍🧑🏼|🧑🏻‍️‍💋‍🧑🏽|🧑🏻‍️‍💋‍🧑🏾|🧑🏻‍️‍💋‍🧑🏿|🧑🏼‍️‍💋‍🧑🏻|🧑🏼‍️‍💋‍🧑🏽|🧑🏼‍️‍💋‍🧑🏾|🧑🏼‍️‍💋‍🧑🏿|🧑🏽‍️‍💋‍🧑🏻|🧑🏽‍️‍💋‍🧑🏼|🧑🏽‍️‍💋‍🧑🏾|🧑🏽‍️‍💋‍🧑🏿|🧑🏾‍️‍💋‍🧑🏻|🧑🏾‍️‍💋‍🧑🏼|🧑🏾‍️‍💋‍🧑🏽|🧑🏾‍️‍💋‍🧑🏿|🧑🏿‍️‍💋‍🧑🏻|🧑🏿‍️‍💋‍🧑🏼|🧑🏿‍️‍💋‍🧑🏽|🧑🏿‍️‍💋‍🧑🏾|👩🏻‍️‍💋‍👨🏻|👩🏻‍️‍💋‍👨🏼|👩🏻‍️‍💋‍👨🏽|👩🏻‍️‍💋‍👨🏾|👩🏻‍️‍💋‍👨🏿|👩🏼‍️‍💋‍👨🏻|👩🏼‍️‍💋‍👨🏼|👩🏼‍️‍💋‍👨🏽|👩🏼‍️‍💋‍👨🏾|👩🏼‍️‍💋‍👨🏿|👩🏽‍️‍💋‍👨🏻|👩🏽‍️‍💋‍👨🏼|👩🏽‍️‍💋‍👨🏽|👩🏽‍️‍💋‍👨🏾|👩🏽‍️‍💋‍👨🏿|👩🏾‍️‍💋‍👨🏻|👩🏾‍️‍💋‍👨🏼|👩🏾‍️‍💋‍👨🏽|👩🏾‍️‍💋‍👨🏾|👩🏾‍️‍💋‍👨🏿|👩🏿‍️‍💋‍👨🏻|👩🏿‍️‍💋‍👨🏼|👩🏿‍️‍💋‍👨🏽|👩🏿‍️‍💋‍👨🏾|👩🏿‍️‍💋‍👨🏿|👨🏻‍️‍💋‍👨🏻|👨🏻‍️‍💋‍👨🏼|👨🏻‍️‍💋‍👨🏽|👨🏻‍️‍💋‍👨🏾|👨🏻‍️‍💋‍👨🏿|👨🏼‍️‍💋‍👨🏻|👨🏼‍️‍💋‍👨🏼|👨🏼‍️‍💋‍👨🏽|👨🏼‍️‍💋‍👨🏾|👨🏼‍️‍💋‍👨🏿|👨🏽‍️‍💋‍👨🏻|👨🏽‍️‍💋‍👨🏼|👨🏽‍️‍💋‍👨🏽|👨🏽‍️‍💋‍👨🏾|👨🏽‍️‍💋‍👨🏿|👨🏾‍️‍💋‍👨🏻|👨🏾‍️‍💋‍👨🏼|👨🏾‍️‍💋‍👨🏽|👨🏾‍️‍💋‍👨🏾|👨🏾‍️‍💋‍👨🏿|👨🏿‍️‍💋‍👨🏻|👨🏿‍️‍💋‍👨🏼|👨🏿‍️‍💋‍👨🏽|👨🏿‍️‍💋‍👨🏾|👨🏿‍️‍💋‍👨🏿|👩🏻‍️‍💋‍👩🏻|👩🏻‍️‍💋‍👩🏼|👩🏻‍️‍💋‍👩🏽|👩🏻‍️‍💋‍👩🏾|👩🏻‍️‍💋‍👩🏿|👩🏼‍️‍💋‍👩🏻|👩🏼‍️‍💋‍👩🏼|👩🏼‍️‍💋‍👩🏽|👩🏼‍️‍💋‍👩🏾|👩🏼‍️‍💋‍👩🏿|👩🏽‍️‍💋‍👩🏻|👩🏽‍️‍💋‍👩🏼|👩🏽‍️‍💋‍👩🏽|👩🏽‍️‍💋‍👩🏾|👩🏽‍️‍💋‍👩🏿|👩🏾‍️‍💋‍👩🏻|👩🏾‍️‍💋‍👩🏼|👩🏾‍️‍💋‍👩🏽|👩🏾‍️‍💋‍👩🏾|👩🏾‍️‍💋‍👩🏿|👩🏿‍️‍💋‍👩🏻|👩🏿‍️‍💋‍👩🏼|👩🏿‍️‍💋‍👩🏽|👩🏿‍️‍💋‍👩🏾|👩🏿‍️‍💋‍👩🏿|🏴󠁧󠁢󠁥󠁮󠁧󠁿|🏴󠁧󠁢󠁳󠁣󠁴󠁿|🏴󠁧󠁢󠁷󠁬󠁳󠁿|🧑🏻‍🤝‍🧑🏻|🧑🏻‍🤝‍🧑🏼|🧑🏻‍🤝‍🧑🏽|🧑🏻‍🤝‍🧑🏾|🧑🏻‍🤝‍🧑🏿|🧑🏼‍🤝‍🧑🏻|🧑🏼‍🤝‍🧑🏼|🧑🏼‍🤝‍🧑🏽|🧑🏼‍🤝‍🧑🏾|🧑🏼‍🤝‍🧑🏿|🧑🏽‍🤝‍🧑🏻|🧑🏽‍🤝‍🧑🏼|🧑🏽‍🤝‍🧑🏽|🧑🏽‍🤝‍🧑🏾|🧑🏽‍🤝‍🧑🏿|🧑🏾‍🤝‍🧑🏻|🧑🏾‍🤝‍🧑🏼|🧑🏾‍🤝‍🧑🏽|🧑🏾‍🤝‍🧑🏾|🧑🏾‍🤝‍🧑🏿|🧑🏿‍🤝‍🧑🏻|🧑🏿‍🤝‍🧑🏼|🧑🏿‍🤝‍🧑🏽|🧑🏿‍🤝‍🧑🏾|🧑🏿‍🤝‍🧑🏿|👩🏻‍🤝‍👩🏼|👩🏻‍🤝‍👩🏽|👩🏻‍🤝‍👩🏾|👩🏻‍🤝‍👩🏿|👩🏼‍🤝‍👩🏻|👩🏼‍🤝‍👩🏽|👩🏼‍🤝‍👩🏾|👩🏼‍🤝‍👩🏿|👩🏽‍🤝‍👩🏻|👩🏽‍🤝‍👩🏼|👩🏽‍🤝‍👩🏾|👩🏽‍🤝‍👩🏿|👩🏾‍🤝‍👩🏻|👩🏾‍🤝‍👩🏼|👩🏾‍🤝‍👩🏽|👩🏾‍🤝‍👩🏿|👩🏿‍🤝‍👩🏻|👩🏿‍🤝‍👩🏼|👩🏿‍🤝‍👩🏽|👩🏿‍🤝‍👩🏾|👩🏻‍🤝‍👨🏼|👩🏻‍🤝‍👨🏽|👩🏻‍🤝‍👨🏾|👩🏻‍🤝‍👨🏿|👩🏼‍🤝‍👨🏻|👩🏼‍🤝‍👨🏽|👩🏼‍🤝‍👨🏾|👩🏼‍🤝‍👨🏿|👩🏽‍🤝‍👨🏻|👩🏽‍🤝‍👨🏼|👩🏽‍🤝‍👨🏾|👩🏽‍🤝‍👨🏿|👩🏾‍🤝‍👨🏻|👩🏾‍🤝‍👨🏼|👩🏾‍🤝‍👨🏽|👩🏾‍🤝‍👨🏿|👩🏿‍🤝‍👨🏻|👩🏿‍🤝‍👨🏼|👩🏿‍🤝‍👨🏽|👩🏿‍🤝‍👨🏾|👨🏻‍🤝‍👨🏼|👨🏻‍🤝‍👨🏽|👨🏻‍🤝‍👨🏾|👨🏻‍🤝‍👨🏿|👨🏼‍🤝‍👨🏻|👨🏼‍🤝‍👨🏽|👨🏼‍🤝‍👨🏾|👨🏼‍🤝‍👨🏿|👨🏽‍🤝‍👨🏻|👨🏽‍🤝‍👨🏼|👨🏽‍🤝‍👨🏾|👨🏽‍🤝‍👨🏿|👨🏾‍🤝‍👨🏻|👨🏾‍🤝‍👨🏼|👨🏾‍🤝‍👨🏽|👨🏾‍🤝‍👨🏿|👨🏿‍🤝‍👨🏻|👨🏿‍🤝‍👨🏼|👨🏿‍🤝‍👨🏽|👨🏿‍🤝‍👨🏾|🧑🏻‍️‍🧑🏼|🧑🏻‍️‍🧑🏽|🧑🏻‍️‍🧑🏾|🧑🏻‍️‍🧑🏿|🧑🏼‍️‍🧑🏻|🧑🏼‍️‍🧑🏽|🧑🏼‍️‍🧑🏾|🧑🏼‍️‍🧑🏿|🧑🏽‍️‍🧑🏻|🧑🏽‍️‍🧑🏼|🧑🏽‍️‍🧑🏾|🧑🏽‍️‍🧑🏿|🧑🏾‍️‍🧑🏻|🧑🏾‍️‍🧑🏼|🧑🏾‍️‍🧑🏽|🧑🏾‍️‍🧑🏿|🧑🏿‍️‍🧑🏻|🧑🏿‍️‍🧑🏼|🧑🏿‍️‍🧑🏽|🧑🏿‍️‍🧑🏾|👩🏻‍️‍👨🏻|👩🏻‍️‍👨🏼|👩🏻‍️‍👨🏽|👩🏻‍️‍👨🏾|👩🏻‍️‍👨🏿|👩🏼‍️‍👨🏻|👩🏼‍️‍👨🏼|👩🏼‍️‍👨🏽|👩🏼‍️‍👨🏾|👩🏼‍️‍👨🏿|👩🏽‍️‍👨🏻|👩🏽‍️‍👨🏼|👩🏽‍️‍👨🏽|👩🏽‍️‍👨🏾|👩🏽‍️‍👨🏿|👩🏾‍️‍👨🏻|👩🏾‍️‍👨🏼|👩🏾‍️‍👨🏽|👩🏾‍️‍👨🏾|👩🏾‍️‍👨🏿|👩🏿‍️‍👨🏻|👩🏿‍️‍👨🏼|👩🏿‍️‍👨🏽|👩🏿‍️‍👨🏾|👩🏿‍️‍👨🏿|👨🏻‍️‍👨🏻|👨🏻‍️‍👨🏼|👨🏻‍️‍👨🏽|👨🏻‍️‍👨🏾|👨🏻‍️‍👨🏿|👨🏼‍️‍👨🏻|👨🏼‍️‍👨🏼|👨🏼‍️‍👨🏽|👨🏼‍️‍👨🏾|👨🏼‍️‍👨🏿|👨🏽‍️‍👨🏻|👨🏽‍️‍👨🏼|👨🏽‍️‍👨🏽|👨🏽‍️‍👨🏾|👨🏽‍️‍👨🏿|👨🏾‍️‍👨🏻|👨🏾‍️‍👨🏼|👨🏾‍️‍👨🏽|👨🏾‍️‍👨🏾|👨🏾‍️‍👨🏿|👨🏿‍️‍👨🏻|👨🏿‍️‍👨🏼|👨🏿‍️‍👨🏽|👨🏿‍️‍👨🏾|👨🏿‍️‍👨🏿|👩🏻‍️‍👩🏻|👩🏻‍️‍👩🏼|👩🏻‍️‍👩🏽|👩🏻‍️‍👩🏾|👩🏻‍️‍👩🏿|👩🏼‍️‍👩🏻|👩🏼‍️‍👩🏼|👩🏼‍️‍👩🏽|👩🏼‍️‍👩🏾|👩🏼‍️‍👩🏿|👩🏽‍️‍👩🏻|👩🏽‍️‍👩🏼|👩🏽‍️‍👩🏽|👩🏽‍️‍👩🏾|👩🏽‍️‍👩🏿|👩🏾‍️‍👩🏻|👩🏾‍️‍👩🏼|👩🏾‍️‍👩🏽|👩🏾‍️‍👩🏾|👩🏾‍️‍👩🏿|👩🏿‍️‍👩🏻|👩🏿‍️‍👩🏼|👩🏿‍️‍👩🏽|👩🏿‍️‍👩🏾|👩🏿‍️‍👩🏿|👩‍️‍💋‍👨|👨‍️‍💋‍👨|👩‍️‍💋‍👩|👨‍👩‍👧‍👦|👨‍👩‍👦‍👦|👨‍👩‍👧‍👧|👨‍👨‍👧‍👦|👨‍👨‍👦‍👦|👨‍👨‍👧‍👧|👩‍👩‍👧‍👦|👩‍👩‍👦‍👦|👩‍👩‍👧‍👧|🧑‍🤝‍🧑|👩‍️‍👨|👨‍️‍👨|👩‍️‍👩|👨‍👩‍👦|👨‍👩‍👧|👨‍👨‍👦|👨‍👨‍👧|👩‍👩‍👦|👩‍👩‍👧|👨‍👦‍👦|👨‍👧‍👦|👨‍👧‍👧|👩‍👦‍👦|👩‍👧‍👦|👩‍👧‍👧|👁️‍🗨️|🧔🏻‍️|🧔🏼‍️|🧔🏽‍️|🧔🏾‍️|🧔🏿‍️|🧔🏻‍️|🧔🏼‍️|🧔🏽‍️|🧔🏾‍️|🧔🏿‍️|👨🏻‍🦰|👨🏼‍🦰|👨🏽‍🦰|👨🏾‍🦰|👨🏿‍🦰|👨🏻‍🦱|👨🏼‍🦱|👨🏽‍🦱|👨🏾‍🦱|👨🏿‍🦱|👨🏻‍🦳|👨🏼‍🦳|👨🏽‍🦳|👨🏾‍🦳|👨🏿‍🦳|👨🏻‍🦲|👨🏼‍🦲|👨🏽‍🦲|👨🏾‍🦲|👨🏿‍🦲|👩🏻‍🦰|👩🏼‍🦰|👩🏽‍🦰|👩🏾‍🦰|👩🏿‍🦰|🧑🏻‍🦰|🧑🏼‍🦰|🧑🏽‍🦰|🧑🏾‍🦰|🧑🏿‍🦰|👩🏻‍🦱|👩🏼‍🦱|👩🏽‍🦱|👩🏾‍🦱|👩🏿‍🦱|🧑🏻‍🦱|🧑🏼‍🦱|🧑🏽‍🦱|🧑🏾‍🦱|🧑🏿‍🦱|👩🏻‍🦳|👩🏼‍🦳|👩🏽‍🦳|👩🏾‍🦳|👩🏿‍🦳|🧑🏻‍🦳|🧑🏼‍🦳|🧑🏽‍🦳|🧑🏾‍🦳|🧑🏿‍🦳|👩🏻‍🦲|👩🏼‍🦲|👩🏽‍🦲|👩🏾‍🦲|👩🏿‍🦲|🧑🏻‍🦲|🧑🏼‍🦲|🧑🏽‍🦲|🧑🏾‍🦲|🧑🏿‍🦲|👱🏻‍️|👱🏼‍️|👱🏽‍️|👱🏾‍️|👱🏿‍️|👱🏻‍️|👱🏼‍️|👱🏽‍️|👱🏾‍️|👱🏿‍️|🙍🏻‍️|🙍🏼‍️|🙍🏽‍️|🙍🏾‍️|🙍🏿‍️|🙍🏻‍️|🙍🏼‍️|🙍🏽‍️|🙍🏾‍️|🙍🏿‍️|🙎🏻‍️|🙎🏼‍️|🙎🏽‍️|🙎🏾‍️|🙎🏿‍️|🙎🏻‍️|🙎🏼‍️|🙎🏽‍️|🙎🏾‍️|🙎🏿‍️|🙅🏻‍️|🙅🏼‍️|🙅🏽‍️|🙅🏾‍️|🙅🏿‍️|🙅🏻‍️|🙅🏼‍️|🙅🏽‍️|🙅🏾‍️|🙅🏿‍️|🙆🏻‍️|🙆🏼‍️|🙆🏽‍️|🙆🏾‍️|🙆🏿‍️|🙆🏻‍️|🙆🏼‍️|🙆🏽‍️|🙆🏾‍️|🙆🏿‍️|💁🏻‍️|💁🏼‍️|💁🏽‍️|💁🏾‍️|💁🏿‍️|💁🏻‍️|💁🏼‍️|💁🏽‍️|💁🏾‍️|💁🏿‍️|🙋🏻‍️|🙋🏼‍️|🙋🏽‍️|🙋🏾‍️|🙋🏿‍️|🙋🏻‍️|🙋🏼‍️|🙋🏽‍️|🙋🏾‍️|🙋🏿‍️|🧏🏻‍️|🧏🏼‍️|🧏🏽‍️|🧏🏾‍️|🧏🏿‍️|🧏🏻‍️|🧏🏼‍️|🧏🏽‍️|🧏🏾‍️|🧏🏿‍️|🙇🏻‍️|🙇🏼‍️|🙇🏽‍️|🙇🏾‍️|🙇🏿‍️|🙇🏻‍️|🙇🏼‍️|🙇🏽‍️|🙇🏾‍️|🙇🏿‍️|🤦🏻‍️|🤦🏼‍️|🤦🏽‍️|🤦🏾‍️|🤦🏿‍️|🤦🏻‍️|🤦🏼‍️|🤦🏽‍️|🤦🏾‍️|🤦🏿‍️|🤷🏻‍️|🤷🏼‍️|🤷🏽‍️|🤷🏾‍️|🤷🏿‍️|🤷🏻‍️|🤷🏼‍️|🤷🏽‍️|🤷🏾‍️|🤷🏿‍️|🧑🏻‍️|🧑🏼‍️|🧑🏽‍️|🧑🏾‍️|🧑🏿‍️|👨🏻‍️|👨🏼‍️|👨🏽‍️|👨🏾‍️|👨🏿‍️|👩🏻‍️|👩🏼‍️|👩🏽‍️|👩🏾‍️|👩🏿‍️|🧑🏻‍🎓|🧑🏼‍🎓|🧑🏽‍🎓|🧑🏾‍🎓|🧑🏿‍🎓|👨🏻‍🎓|👨🏼‍🎓|👨🏽‍🎓|👨🏾‍🎓|👨🏿‍🎓|👩🏻‍🎓|👩🏼‍🎓|👩🏽‍🎓|👩🏾‍🎓|👩🏿‍🎓|🧑🏻‍🏫|🧑🏼‍🏫|🧑🏽‍🏫|🧑🏾‍🏫|🧑🏿‍🏫|👨🏻‍🏫|👨🏼‍🏫|👨🏽‍🏫|👨🏾‍🏫|👨🏿‍🏫|👩🏻‍🏫|👩🏼‍🏫|👩🏽‍🏫|👩🏾‍🏫|👩🏿‍🏫|🧑🏻‍️|🧑🏼‍️|🧑🏽‍️|🧑🏾‍️|🧑🏿‍️|👨🏻‍️|👨🏼‍️|👨🏽‍️|👨🏾‍️|👨🏿‍️|👩🏻‍️|👩🏼‍️|👩🏽‍️|👩🏾‍️|👩🏿‍️|🧑🏻‍🌾|🧑🏼‍🌾|🧑🏽‍🌾|🧑🏾‍🌾|🧑🏿‍🌾|👨🏻‍🌾|👨🏼‍🌾|👨🏽‍🌾|👨🏾‍🌾|👨🏿‍🌾|👩🏻‍🌾|👩🏼‍🌾|👩🏽‍🌾|👩🏾‍🌾|👩🏿‍🌾|🧑🏻‍🍳|🧑🏼‍🍳|🧑🏽‍🍳|🧑🏾‍🍳|🧑🏿‍🍳|👨🏻‍🍳|👨🏼‍🍳|👨🏽‍🍳|👨🏾‍🍳|👨🏿‍🍳|👩🏻‍🍳|👩🏼‍🍳|👩🏽‍🍳|👩🏾‍🍳|👩🏿‍🍳|🧑🏻‍🔧|🧑🏼‍🔧|🧑🏽‍🔧|🧑🏾‍🔧|🧑🏿‍🔧|👨🏻‍🔧|👨🏼‍🔧|👨🏽‍🔧|👨🏾‍🔧|👨🏿‍🔧|👩🏻‍🔧|👩🏼‍🔧|👩🏽‍🔧|👩🏾‍🔧|👩🏿‍🔧|🧑🏻‍🏭|🧑🏼‍🏭|🧑🏽‍🏭|🧑🏾‍🏭|🧑🏿‍🏭|👨🏻‍🏭|👨🏼‍🏭|👨🏽‍🏭|👨🏾‍🏭|👨🏿‍🏭|👩🏻‍🏭|👩🏼‍🏭|👩🏽‍🏭|👩🏾‍🏭|👩🏿‍🏭|🧑🏻‍💼|🧑🏼‍💼|🧑🏽‍💼|🧑🏾‍💼|🧑🏿‍💼|👨🏻‍💼|👨🏼‍💼|👨🏽‍💼|👨🏾‍💼|👨🏿‍💼|👩🏻‍💼|👩🏼‍💼|👩🏽‍💼|👩🏾‍💼|👩🏿‍💼|🧑🏻‍🔬|🧑🏼‍🔬|🧑🏽‍🔬|🧑🏾‍🔬|🧑🏿‍🔬|👨🏻‍🔬|👨🏼‍🔬|👨🏽‍🔬|👨🏾‍🔬|👨🏿‍🔬|👩🏻‍🔬|👩🏼‍🔬|👩🏽‍🔬|👩🏾‍🔬|👩🏿‍🔬|🧑🏻‍💻|🧑🏼‍💻|🧑🏽‍💻|🧑🏾‍💻|🧑🏿‍💻|👨🏻‍💻|👨🏼‍💻|👨🏽‍💻|👨🏾‍💻|👨🏿‍💻|👩🏻‍💻|👩🏼‍💻|👩🏽‍💻|👩🏾‍💻|👩🏿‍💻|🧑🏻‍🎤|🧑🏼‍🎤|🧑🏽‍🎤|🧑🏾‍🎤|🧑🏿‍🎤|👨🏻‍🎤|👨🏼‍🎤|👨🏽‍🎤|👨🏾‍🎤|👨🏿‍🎤|👩🏻‍🎤|👩🏼‍🎤|👩🏽‍🎤|👩🏾‍🎤|👩🏿‍🎤|🧑🏻‍🎨|🧑🏼‍🎨|🧑🏽‍🎨|🧑🏾‍🎨|🧑🏿‍🎨|👨🏻‍🎨|👨🏼‍🎨|👨🏽‍🎨|👨🏾‍🎨|👨🏿‍🎨|👩🏻‍🎨|👩🏼‍🎨|👩🏽‍🎨|👩🏾‍🎨|👩🏿‍🎨|🧑🏻‍️|🧑🏼‍️|🧑🏽‍️|🧑🏾‍️|🧑🏿‍️|👨🏻‍️|👨🏼‍️|👨🏽‍️|👨🏾‍️|👨🏿‍️|👩🏻‍️|👩🏼‍️|👩🏽‍️|👩🏾‍️|👩🏿‍️|🧑🏻‍🚀|🧑🏼‍🚀|🧑🏽‍🚀|🧑🏾‍🚀|🧑🏿‍🚀|👨🏻‍🚀|👨🏼‍🚀|👨🏽‍🚀|👨🏾‍🚀|👨🏿‍🚀|👩🏻‍🚀|👩🏼‍🚀|👩🏽‍🚀|👩🏾‍🚀|👩🏿‍🚀|🧑🏻‍🚒|🧑🏼‍🚒|🧑🏽‍🚒|🧑🏾‍🚒|🧑🏿‍🚒|👨🏻‍🚒|👨🏼‍🚒|👨🏽‍🚒|👨🏾‍🚒|👨🏿‍🚒|👩🏻‍🚒|👩🏼‍🚒|👩🏽‍🚒|👩🏾‍🚒|👩🏿‍🚒|👮🏻‍️|👮🏼‍️|👮🏽‍️|👮🏾‍️|👮🏿‍️|👮🏻‍️|👮🏼‍️|👮🏽‍️|👮🏾‍️|👮🏿‍️|🕵🏻‍️|🕵🏼‍️|🕵🏽‍️|🕵🏾‍️|🕵🏿‍️|🕵🏻‍️|🕵🏼‍️|🕵🏽‍️|🕵🏾‍️|🕵🏿‍️|💂🏻‍️|💂🏼‍️|💂🏽‍️|💂🏾‍️|💂🏿‍️|💂🏻‍️|💂🏼‍️|💂🏽‍️|💂🏾‍️|💂🏿‍️|👷🏻‍️|👷🏼‍️|👷🏽‍️|👷🏾‍️|👷🏿‍️|👷🏻‍️|👷🏼‍️|👷🏽‍️|👷🏾‍️|👷🏿‍️|👳🏻‍️|👳🏼‍️|👳🏽‍️|👳🏾‍️|👳🏿‍️|👳🏻‍️|👳🏼‍️|👳🏽‍️|👳🏾‍️|👳🏿‍️|🤵🏻‍️|🤵🏼‍️|🤵🏽‍️|🤵🏾‍️|🤵🏿‍️|🤵🏻‍️|🤵🏼‍️|🤵🏽‍️|🤵🏾‍️|🤵🏿‍️|👰🏻‍️|👰🏼‍️|👰🏽‍️|👰🏾‍️|👰🏿‍️|👰🏻‍️|👰🏼‍️|👰🏽‍️|👰🏾‍️|👰🏿‍️|👩🏻‍🍼|👩🏼‍🍼|👩🏽‍🍼|👩🏾‍🍼|👩🏿‍🍼|👨🏻‍🍼|👨🏼‍🍼|👨🏽‍🍼|👨🏾‍🍼|👨🏿‍🍼|🧑🏻‍🍼|🧑🏼‍🍼|🧑🏽‍🍼|🧑🏾‍🍼|🧑🏿‍🍼|🧑🏻‍🎄|🧑🏼‍🎄|🧑🏽‍🎄|🧑🏾‍🎄|🧑🏿‍🎄|🦸🏻‍️|🦸🏼‍️|🦸🏽‍️|🦸🏾‍️|🦸🏿‍️|🦸🏻‍️|🦸🏼‍️|🦸🏽‍️|🦸🏾‍️|🦸🏿‍️|🦹🏻‍️|🦹🏼‍️|🦹🏽‍️|🦹🏾‍️|🦹🏿‍️|🦹🏻‍️|🦹🏼‍️|🦹🏽‍️|🦹🏾‍️|🦹🏿‍️|🧙🏻‍️|🧙🏼‍️|🧙🏽‍️|🧙🏾‍️|🧙🏿‍️|🧙🏻‍️|🧙🏼‍️|🧙🏽‍️|🧙🏾‍️|🧙🏿‍️|🧚🏻‍️|🧚🏼‍️|🧚🏽‍️|🧚🏾‍️|🧚🏿‍️|🧚🏻‍️|🧚🏼‍️|🧚🏽‍️|🧚🏾‍️|🧚🏿‍️|🧛🏻‍️|🧛🏼‍️|🧛🏽‍️|🧛🏾‍️|🧛🏿‍️|🧛🏻‍️|🧛🏼‍️|🧛🏽‍️|🧛🏾‍️|🧛🏿‍️|🧜🏻‍️|🧜🏼‍️|🧜🏽‍️|🧜🏾‍️|🧜🏿‍️|🧜🏻‍️|🧜🏼‍️|🧜🏽‍️|🧜🏾‍️|🧜🏿‍️|🧝🏻‍️|🧝🏼‍️|🧝🏽‍️|🧝🏾‍️|🧝🏿‍️|🧝🏻‍️|🧝🏼‍️|🧝🏽‍️|🧝🏾‍️|🧝🏿‍️|💆🏻‍️|💆🏼‍️|💆🏽‍️|💆🏾‍️|💆🏿‍️|💆🏻‍️|💆🏼‍️|💆🏽‍️|💆🏾‍️|💆🏿‍️|💇🏻‍️|💇🏼‍️|💇🏽‍️|💇🏾‍️|💇🏿‍️|💇🏻‍️|💇🏼‍️|💇🏽‍️|💇🏾‍️|💇🏿‍️|🚶🏻‍️|🚶🏼‍️|🚶🏽‍️|🚶🏾‍️|🚶🏿‍️|🚶🏻‍️|🚶🏼‍️|🚶🏽‍️|🚶🏾‍️|🚶🏿‍️|🧍🏻‍️|🧍🏼‍️|🧍🏽‍️|🧍🏾‍️|🧍🏿‍️|🧍🏻‍️|🧍🏼‍️|🧍🏽‍️|🧍🏾‍️|🧍🏿‍️|🧎🏻‍️|🧎🏼‍️|🧎🏽‍️|🧎🏾‍️|🧎🏿‍️|🧎🏻‍️|🧎🏼‍️|🧎🏽‍️|🧎🏾‍️|🧎🏿‍️|🧑🏻‍🦯|🧑🏼‍🦯|🧑🏽‍🦯|🧑🏾‍🦯|🧑🏿‍🦯|👨🏻‍🦯|👨🏼‍🦯|👨🏽‍🦯|👨🏾‍🦯|👨🏿‍🦯|👩🏻‍🦯|👩🏼‍🦯|👩🏽‍🦯|👩🏾‍🦯|👩🏿‍🦯|🧑🏻‍🦼|🧑🏼‍🦼|🧑🏽‍🦼|🧑🏾‍🦼|🧑🏿‍🦼|👨🏻‍🦼|👨🏼‍🦼|👨🏽‍🦼|👨🏾‍🦼|👨🏿‍🦼|👩🏻‍🦼|👩🏼‍🦼|👩🏽‍🦼|👩🏾‍🦼|👩🏿‍🦼|🧑🏻‍🦽|🧑🏼‍🦽|🧑🏽‍🦽|🧑🏾‍🦽|🧑🏿‍🦽|👨🏻‍🦽|👨🏼‍🦽|👨🏽‍🦽|👨🏾‍🦽|👨🏿‍🦽|👩🏻‍🦽|👩🏼‍🦽|👩🏽‍🦽|👩🏾‍🦽|👩🏿‍🦽|🏃🏻‍️|🏃🏼‍️|🏃🏽‍️|🏃🏾‍️|🏃🏿‍️|🏃🏻‍️|🏃🏼‍️|🏃🏽‍️|🏃🏾‍️|🏃🏿‍️|🧖🏻‍️|🧖🏼‍️|🧖🏽‍️|🧖🏾‍️|🧖🏿‍️|🧖🏻‍️|🧖🏼‍️|🧖🏽‍️|🧖🏾‍️|🧖🏿‍️|🧗🏻‍️|🧗🏼‍️|🧗🏽‍️|🧗🏾‍️|🧗🏿‍️|🧗🏻‍️|🧗🏼‍️|🧗🏽‍️|🧗🏾‍️|🧗🏿‍️|🏌🏻‍️|🏌🏼‍️|🏌🏽‍️|🏌🏾‍️|🏌🏿‍️|🏌🏻‍️|🏌🏼‍️|🏌🏽‍️|🏌🏾‍️|🏌🏿‍️|🏄🏻‍️|🏄🏼‍️|🏄🏽‍️|🏄🏾‍️|🏄🏿‍️|🏄🏻‍️|🏄🏼‍️|🏄🏽‍️|🏄🏾‍️|🏄🏿‍️|🚣🏻‍️|🚣🏼‍️|🚣🏽‍️|🚣🏾‍️|🚣🏿‍️|🚣🏻‍️|🚣🏼‍️|🚣🏽‍️|🚣🏾‍️|🚣🏿‍️|🏊🏻‍️|🏊🏼‍️|🏊🏽‍️|🏊🏾‍️|🏊🏿‍️|🏊🏻‍️|🏊🏼‍️|🏊🏽‍️|🏊🏾‍️|🏊🏿‍️|🏋🏻‍️|🏋🏼‍️|🏋🏽‍️|🏋🏾‍️|🏋🏿‍️|🏋🏻‍️|🏋🏼‍️|🏋🏽‍️|🏋🏾‍️|🏋🏿‍️|🚴🏻‍️|🚴🏼‍️|🚴🏽‍️|🚴🏾‍️|🚴🏿‍️|🚴🏻‍️|🚴🏼‍️|🚴🏽‍️|🚴🏾‍️|🚴🏿‍️|🚵🏻‍️|🚵🏼‍️|🚵🏽‍️|🚵🏾‍️|🚵🏿‍️|🚵🏻‍️|🚵🏼‍️|🚵🏽‍️|🚵🏾‍️|🚵🏿‍️|🤸🏻‍️|🤸🏼‍️|🤸🏽‍️|🤸🏾‍️|🤸🏿‍️|🤸🏻‍️|🤸🏼‍️|🤸🏽‍️|🤸🏾‍️|🤸🏿‍️|🤽🏻‍️|🤽🏼‍️|🤽🏽‍️|🤽🏾‍️|🤽🏿‍️|🤽🏻‍️|🤽🏼‍️|🤽🏽‍️|🤽🏾‍️|🤽🏿‍️|🤾🏻‍️|🤾🏼‍️|🤾🏽‍️|🤾🏾‍️|🤾🏿‍️|🤾🏻‍️|🤾🏼‍️|🤾🏽‍️|🤾🏾‍️|🤾🏿‍️|🤹🏻‍️|🤹🏼‍️|🤹🏽‍️|🤹🏾‍️|🤹🏿‍️|🤹🏻‍️|🤹🏼‍️|🤹🏽‍️|🤹🏾‍️|🤹🏿‍️|🧘🏻‍️|🧘🏼‍️|🧘🏽‍️|🧘🏾‍️|🧘🏿‍️|🧘🏻‍️|🧘🏼‍️|🧘🏽‍️|🧘🏾‍️|🧘🏿‍️|😶‍️|🕵️‍️|🕵️‍️|🏌️‍️|🏌️‍️|🏋️‍️|🏋️‍️|️‍🌈|️‍️|🏻‍️|🏼‍️|🏽‍️|🏾‍️|🏿‍️|🏻‍️|🏼‍️|🏽‍️|🏾‍️|🏿‍️|😮‍💨|😵‍💫|️‍🔥|️‍🩹|🧔‍️|🧔‍️|👨‍🦰|👨‍🦱|👨‍🦳|👨‍🦲|👩‍🦰|🧑‍🦰|👩‍🦱|🧑‍🦱|👩‍🦳|🧑‍🦳|👩‍🦲|🧑‍🦲|👱‍️|👱‍️|🙍‍️|🙍‍️|🙎‍️|🙎‍️|🙅‍️|🙅‍️|🙆‍️|🙆‍️|💁‍️|💁‍️|🙋‍️|🙋‍️|🧏‍️|🧏‍️|🙇‍️|🙇‍️|🤦‍️|🤦‍️|🤷‍️|🤷‍️|🧑‍️|👨‍️|👩‍️|🧑‍🎓|👨‍🎓|👩‍🎓|🧑‍🏫|👨‍🏫|👩‍🏫|🧑‍️|👨‍️|👩‍️|🧑‍🌾|👨‍🌾|👩‍🌾|🧑‍🍳|👨‍🍳|👩‍🍳|🧑‍🔧|👨‍🔧|👩‍🔧|🧑‍🏭|👨‍🏭|👩‍🏭|🧑‍💼|👨‍💼|👩‍💼|🧑‍🔬|👨‍🔬|👩‍🔬|🧑‍💻|👨‍💻|👩‍💻|🧑‍🎤|👨‍🎤|👩‍🎤|🧑‍🎨|👨‍🎨|👩‍🎨|🧑‍️|👨‍️|👩‍️|🧑‍🚀|👨‍🚀|👩‍🚀|🧑‍🚒|👨‍🚒|👩‍🚒|👮‍️|👮‍️|💂‍️|💂‍️|👷‍️|👷‍️|👳‍️|👳‍️|🤵‍️|🤵‍️|👰‍️|👰‍️|👩‍🍼|👨‍🍼|🧑‍🍼|🧑‍🎄|🦸‍️|🦸‍️|🦹‍️|🦹‍️|🧙‍️|🧙‍️|🧚‍️|🧚‍️|🧛‍️|🧛‍️|🧜‍️|🧜‍️|🧝‍️|🧝‍️|🧞‍️|🧞‍️|🧟‍️|🧟‍️|💆‍️|💆‍️|💇‍️|💇‍️|🚶‍️|🚶‍️|🧍‍️|🧍‍️|🧎‍️|🧎‍️|🧑‍🦯|👨‍🦯|👩‍🦯|🧑‍🦼|👨‍🦼|👩‍🦼|🧑‍🦽|👨‍🦽|👩‍🦽|🏃‍️|🏃‍️|👯‍️|👯‍️|🧖‍️|🧖‍️|🧗‍️|🧗‍️|🏄‍️|🏄‍️|🚣‍️|🚣‍️|🏊‍️|🏊‍️|️‍️|️‍️|🚴‍️|🚴‍️|🚵‍️|🚵‍️|🤸‍️|🤸‍️|🤼‍️|🤼‍️|🤽‍️|🤽‍️|🤾‍️|🤾‍️|🤹‍️|🤹‍️|🧘‍️|🧘‍️|👨‍👦|👨‍👧|👩‍👦|👩‍👧|🐕‍🦺|🐻‍️|🏴‍️|🐈‍⬛|🇦🇨|🇦🇩|🇦🇪|🇦🇫|🇦🇬|🇦🇮|🇦🇱|🇦🇲|🇦🇴|🇦🇶|🇦🇷|🇦🇸|🇦🇹|🇦🇺|🇦🇼|🇦🇽|🇦🇿|🇧🇦|🇧🇧|🇧🇩|🇧🇪|🇧🇫|🇧🇬|🇧🇭|🇧🇮|🇧🇯|🇧🇱|🇧🇲|🇧🇳|🇧🇴|🇧🇶|🇧🇷|🇧🇸|🇧🇹|🇧🇻|🇧🇼|🇧🇾|🇧🇿|🇨🇦|🇨🇨|🇨🇩|🇨🇫|🇨🇬|🇨🇭|🇨🇮|🇨🇰|🇨🇱|🇨🇲|🇨🇳|🇨🇴|🇨🇵|🇨🇷|🇨🇺|🇨🇻|🇨🇼|🇨🇽|🇨🇾|🇨🇿|🇩🇪|🇩🇬|🇩🇯|🇩🇰|🇩🇲|🇩🇴|🇩🇿|🇪🇦|🇪🇨|🇪🇪|🇪🇬|🇪🇭|🇪🇷|🇪🇸|🇪🇹|🇪🇺|🇫🇮|🇫🇯|🇫🇰|🇫🇲|🇫🇴|🇫🇷|🇬🇦|🇬🇧|🇬🇩|🇬🇪|🇬🇫|🇬🇬|🇬🇭|🇬🇮|🇬🇱|🇬🇲|🇬🇳|🇬🇵|🇬🇶|🇬🇷|🇬🇸|🇬🇹|🇬🇺|🇬🇼|🇬🇾|🇭🇰|🇭🇲|🇭🇳|🇭🇷|🇭🇹|🇭🇺|🇮🇨|🇮🇩|🇮🇪|🇮🇱|🇮🇲|🇮🇳|🇮🇴|🇮🇶|🇮🇷|🇮🇸|🇮🇹|🇯🇪|🇯🇲|🇯🇴|🇯🇵|🇰🇪|🇰🇬|🇰🇭|🇰🇮|🇰🇲|🇰🇳|🇰🇵|🇰🇷|🇰🇼|🇰🇾|🇰🇿|🇱🇦|🇱🇧|🇱🇨|🇱🇮|🇱🇰|🇱🇷|🇱🇸|🇱🇹|🇱🇺|🇱🇻|🇱🇾|🇲🇦|🇲🇨|🇲🇩|🇲🇪|🇲🇫|🇲🇬|🇲🇭|🇲🇰|🇲🇱|🇲🇲|🇲🇳|🇲🇴|🇲🇵|🇲🇶|🇲🇷|🇲🇸|🇲🇹|🇲🇺|🇲🇻|🇲🇼|🇲🇽|🇲🇾|🇲🇿|🇳🇦|🇳🇨|🇳🇪|🇳🇫|🇳🇬|🇳🇮|🇳🇱|🇳🇴|🇳🇵|🇳🇷|🇳🇺|🇳🇿|🇴🇲|🇵🇦|🇵🇪|🇵🇫|🇵🇬|🇵🇭|🇵🇰|🇵🇱|🇵🇲|🇵🇳|🇵🇷|🇵🇸|🇵🇹|🇵🇼|🇵🇾|🇶🇦|🇷🇪|🇷🇴|🇷🇸|🇷🇺|🇷🇼|🇸🇦|🇸🇧|🇸🇨|🇸🇩|🇸🇪|🇸🇬|🇸🇭|🇸🇮|🇸🇯|🇸🇰|🇸🇱|🇸🇲|🇸🇳|🇸🇴|🇸🇷|🇸🇸|🇸🇹|🇸🇻|🇸🇽|🇸🇾|🇸🇿|🇹🇦|🇹🇨|🇹🇩|🇹🇫|🇹🇬|🇹🇭|🇹🇯|🇹🇰|🇹🇱|🇹🇲|🇹🇳|🇹🇴|🇹🇷|🇹🇹|🇹🇻|🇹🇼|🇹🇿|🇺🇦|🇺🇬|🇺🇲|🇺🇳|🇺🇸|🇺🇾|🇺🇿|🇻🇦|🇻🇨|🇻🇪|🇻🇬|🇻🇮|🇻🇳|🇻🇺|🇼🇫|🇼🇸|🇽🇰|🇾🇪|🇾🇹|🇿🇦|🇿🇲|🇿🇼|👋🏻|👋🏼|👋🏽|👋🏾|👋🏿|🤚🏻|🤚🏼|🤚🏽|🤚🏾|🤚🏿|🖐🏻|🖐🏼|🖐🏽|🖐🏾|🖐🏿|🖖🏻|🖖🏼|🖖🏽|🖖🏾|🖖🏿|👌🏻|👌🏼|👌🏽|👌🏾|👌🏿|🤌🏻|🤌🏼|🤌🏽|🤌🏾|🤌🏿|🤏🏻|🤏🏼|🤏🏽|🤏🏾|🤏🏿|🤞🏻|🤞🏼|🤞🏽|🤞🏾|🤞🏿|🤟🏻|🤟🏼|🤟🏽|🤟🏾|🤟🏿|🤘🏻|🤘🏼|🤘🏽|🤘🏾|🤘🏿|🤙🏻|🤙🏼|🤙🏽|🤙🏾|🤙🏿|👈🏻|👈🏼|👈🏽|👈🏾|👈🏿|👉🏻|👉🏼|👉🏽|👉🏾|👉🏿|👆🏻|👆🏼|👆🏽|👆🏾|👆🏿|🖕🏻|🖕🏼|🖕🏽|🖕🏾|🖕🏿|👇🏻|👇🏼|👇🏽|👇🏾|👇🏿|👍🏻|👍🏼|👍🏽|👍🏾|👍🏿|👎🏻|👎🏼|👎🏽|👎🏾|👎🏿|👊🏻|👊🏼|👊🏽|👊🏾|👊🏿|🤛🏻|🤛🏼|🤛🏽|🤛🏾|🤛🏿|🤜🏻|🤜🏼|🤜🏽|🤜🏾|🤜🏿|👏🏻|👏🏼|👏🏽|👏🏾|👏🏿|🙌🏻|🙌🏼|🙌🏽|🙌🏾|🙌🏿|👐🏻|👐🏼|👐🏽|👐🏾|👐🏿|🤲🏻|🤲🏼|🤲🏽|🤲🏾|🤲🏿|🙏🏻|🙏🏼|🙏🏽|🙏🏾|🙏🏿|💅🏻|💅🏼|💅🏽|💅🏾|💅🏿|🤳🏻|🤳🏼|🤳🏽|🤳🏾|🤳🏿|💪🏻|💪🏼|💪🏽|💪🏾|💪🏿|🦵🏻|🦵🏼|🦵🏽|🦵🏾|🦵🏿|🦶🏻|🦶🏼|🦶🏽|🦶🏾|🦶🏿|👂🏻|👂🏼|👂🏽|👂🏾|👂🏿|🦻🏻|🦻🏼|🦻🏽|🦻🏾|🦻🏿|👃🏻|👃🏼|👃🏽|👃🏾|👃🏿|👶🏻|👶🏼|👶🏽|👶🏾|👶🏿|🧒🏻|🧒🏼|🧒🏽|🧒🏾|🧒🏿|👦🏻|👦🏼|👦🏽|👦🏾|👦🏿|👧🏻|👧🏼|👧🏽|👧🏾|👧🏿|🧑🏻|🧑🏼|🧑🏽|🧑🏾|🧑🏿|👱🏻|👱🏼|👱🏽|👱🏾|👱🏿|👨🏻|👨🏼|👨🏽|👨🏾|👨🏿|🧔🏻|🧔🏼|🧔🏽|🧔🏾|🧔🏿|👩🏻|👩🏼|👩🏽|👩🏾|👩🏿|🧓🏻|🧓🏼|🧓🏽|🧓🏾|🧓🏿|👴🏻|👴🏼|👴🏽|👴🏾|👴🏿|👵🏻|👵🏼|👵🏽|👵🏾|👵🏿|🙍🏻|🙍🏼|🙍🏽|🙍🏾|🙍🏿|🙎🏻|🙎🏼|🙎🏽|🙎🏾|🙎🏿|🙅🏻|🙅🏼|🙅🏽|🙅🏾|🙅🏿|🙆🏻|🙆🏼|🙆🏽|🙆🏾|🙆🏿|💁🏻|💁🏼|💁🏽|💁🏾|💁🏿|🙋🏻|🙋🏼|🙋🏽|🙋🏾|🙋🏿|🧏🏻|🧏🏼|🧏🏽|🧏🏾|🧏🏿|🙇🏻|🙇🏼|🙇🏽|🙇🏾|🙇🏿|🤦🏻|🤦🏼|🤦🏽|🤦🏾|🤦🏿|🤷🏻|🤷🏼|🤷🏽|🤷🏾|🤷🏿|👮🏻|👮🏼|👮🏽|👮🏾|👮🏿|🕵🏻|🕵🏼|🕵🏽|🕵🏾|🕵🏿|💂🏻|💂🏼|💂🏽|💂🏾|💂🏿|🥷🏻|🥷🏼|🥷🏽|🥷🏾|🥷🏿|👷🏻|👷🏼|👷🏽|👷🏾|👷🏿|🤴🏻|🤴🏼|🤴🏽|🤴🏾|🤴🏿|👸🏻|👸🏼|👸🏽|👸🏾|👸🏿|👳🏻|👳🏼|👳🏽|👳🏾|👳🏿|👲🏻|👲🏼|👲🏽|👲🏾|👲🏿|🧕🏻|🧕🏼|🧕🏽|🧕🏾|🧕🏿|🤵🏻|🤵🏼|🤵🏽|🤵🏾|🤵🏿|👰🏻|👰🏼|👰🏽|👰🏾|👰🏿|🤰🏻|🤰🏼|🤰🏽|🤰🏾|🤰🏿|🤱🏻|🤱🏼|🤱🏽|🤱🏾|🤱🏿|👼🏻|👼🏼|👼🏽|👼🏾|👼🏿|🎅🏻|🎅🏼|🎅🏽|🎅🏾|🎅🏿|🤶🏻|🤶🏼|🤶🏽|🤶🏾|🤶🏿|🦸🏻|🦸🏼|🦸🏽|🦸🏾|🦸🏿|🦹🏻|🦹🏼|🦹🏽|🦹🏾|🦹🏿|🧙🏻|🧙🏼|🧙🏽|🧙🏾|🧙🏿|🧚🏻|🧚🏼|🧚🏽|🧚🏾|🧚🏿|🧛🏻|🧛🏼|🧛🏽|🧛🏾|🧛🏿|🧜🏻|🧜🏼|🧜🏽|🧜🏾|🧜🏿|🧝🏻|🧝🏼|🧝🏽|🧝🏾|🧝🏿|💆🏻|💆🏼|💆🏽|💆🏾|💆🏿|💇🏻|💇🏼|💇🏽|💇🏾|💇🏿|🚶🏻|🚶🏼|🚶🏽|🚶🏾|🚶🏿|🧍🏻|🧍🏼|🧍🏽|🧍🏾|🧍🏿|🧎🏻|🧎🏼|🧎🏽|🧎🏾|🧎🏿|🏃🏻|🏃🏼|🏃🏽|🏃🏾|🏃🏿|💃🏻|💃🏼|💃🏽|💃🏾|💃🏿|🕺🏻|🕺🏼|🕺🏽|🕺🏾|🕺🏿|🕴🏻|🕴🏼|🕴🏽|🕴🏾|🕴🏿|🧖🏻|🧖🏼|🧖🏽|🧖🏾|🧖🏿|🧗🏻|🧗🏼|🧗🏽|🧗🏾|🧗🏿|🏇🏻|🏇🏼|🏇🏽|🏇🏾|🏇🏿|🏂🏻|🏂🏼|🏂🏽|🏂🏾|🏂🏿|🏌🏻|🏌🏼|🏌🏽|🏌🏾|🏌🏿|🏄🏻|🏄🏼|🏄🏽|🏄🏾|🏄🏿|🚣🏻|🚣🏼|🚣🏽|🚣🏾|🚣🏿|🏊🏻|🏊🏼|🏊🏽|🏊🏾|🏊🏿|🏋🏻|🏋🏼|🏋🏽|🏋🏾|🏋🏿|🚴🏻|🚴🏼|🚴🏽|🚴🏾|🚴🏿|🚵🏻|🚵🏼|🚵🏽|🚵🏾|🚵🏿|🤸🏻|🤸🏼|🤸🏽|🤸🏾|🤸🏿|🤽🏻|🤽🏼|🤽🏽|🤽🏾|🤽🏿|🤾🏻|🤾🏼|🤾🏽|🤾🏾|🤾🏿|🤹🏻|🤹🏼|🤹🏽|🤹🏾|🤹🏿|🧘🏻|🧘🏼|🧘🏽|🧘🏾|🧘🏿|🛀🏻|🛀🏼|🛀🏽|🛀🏾|🛀🏿|🛌🏻|🛌🏼|🛌🏽|🛌🏾|🛌🏿|👭🏻|👭🏼|👭🏽|👭🏾|👭🏿|👫🏻|👫🏼|👫🏽|👫🏾|👫🏿|👬🏻|👬🏼|👬🏽|👬🏾|👬🏿|💏🏻|💏🏼|💏🏽|💏🏾|💏🏿|💑🏻|💑🏼|💑🏽|💑🏾|💑🏿|#️⃣|0️⃣|1️⃣|2️⃣|3️⃣|4️⃣|5️⃣|6️⃣|7️⃣|8️⃣|9️⃣|✋🏻|✋🏼|✋🏽|✋🏾|✋🏿|🏻|🏼|🏽|🏾|🏿|🏻|🏼|🏽|🏾|🏿|✊🏻|✊🏼|✊🏽|✊🏾|✊🏿|🏻|🏼|🏽|🏾|🏿|🏻|🏼|🏽|🏾|🏿|😀|😃|😄|😁|😆|😅|🤣|😂|🙂|🙃|😉|😊|😇|🥰|😍|🤩|😘|😗|😚|😙|🥲|😋|😛|😜|🤪|😝|🤑|🤗|🤭|🤫|🤔|🤐|🤨|😐|😑|😶|😏|😒|🙄|😬|🤥|😌|😔|😪|🤤|😴|😷|🤒|🤕|🤢|🤮|🤧|🥵|🥶|🥴|😵|🤯|🤠|🥳|🥸|😎|🤓|🧐|😕|😟|🙁|😮|😯|😲|😳|🥺|😦|😧|😨|😰|😥|😢|😭|😱|😖|😣|😞|😓|😩|😫|🥱|😤|😡|😠|🤬|😈|👿|💀|💩|🤡|👹|👺|👻|👽|👾|🤖|😺|😸|😹|😻|😼|😽|🙀|😿|😾|🙈|🙉|🙊|💋|💌|💘|💝|💖|💗|💓|💞|💕|💟|💔|🧡|💛|💚|💙|💜|🤎|🖤|🤍|💯|💢|💥|💫|💦|💨|💣|💬|💭|💤|👋|🤚|🖖|👌|🤌|🤏|🤞|🤟|🤘|🤙|👈|👉|👆|🖕|👇|👍|👎|👊|🤛|🤜|👏|🙌|👐|🤲|🤝|🙏|💅|🤳|💪|🦾|🦿|🦵|🦶|👂|🦻|👃|🧠|🫀|🫁|🦷|🦴|👀|👅|👄|👶|🧒|👦|👧|🧑|👱|👨|🧔|👩|🧓|👴|👵|🙍|🙎|🙅|🙆|💁|🙋|🧏|🙇|🤦|🤷|👮|💂|🥷|👷|🤴|👸|👳|👲|🧕|🤵|👰|🤰|🤱|👼|🎅|🤶|🦸|🦹|🧙|🧚|🧛|🧜|🧝|🧞|🧟|💆|💇|🚶|🧍|🧎|🏃|💃|🕺|👯|🧖|🧗|🤺|🏇|🏂|🏄|🚣|🏊|🚴|🚵|🤸|🤼|🤽|🤾|🤹|🧘|🛀|🛌|👭|👫|👬|💏|💑|👪|👤|👥|🫂|👣|🦰|🦱|🦳|🦲|🐵|🐒|🦍|🦧|🐶|🐕|🦮|🐩|🐺|🦊|🦝|🐱|🐈|🦁|🐯|🐅|🐆|🐴|🐎|🦄|🦓|🦌|🦬|🐮|🐂|🐃|🐄|🐷|🐖|🐗|🐽|🐏|🐑|🐐|🐪|🐫|🦙|🦒|🐘|🦣|🦏|🦛|🐭|🐁|🐀|🐹|🐰|🐇|🦫|🦔|🦇|🐻|🐨|🐼|🦥|🦦|🦨|🦘|🦡|🐾|🦃|🐔|🐓|🐣|🐤|🐥|🐦|🐧|🦅|🦆|🦢|🦉|🦤|🪶|🦩|🦚|🦜|🐸|🐊|🐢|🦎|🐍|🐲|🐉|🦕|🦖|🐳|🐋|🐬|🦭|🐟|🐠|🐡|🦈|🐙|🐚|🐌|🦋|🐛|🐜|🐝|🪲|🐞|🦗|🪳|🦂|🦟|🪰|🪱|🦠|💐|🌸|💮|🌹|🥀|🌺|🌻|🌼|🌷|🌱|🪴|🌲|🌳|🌴|🌵|🌾|🌿|🍀|🍁|🍂|🍃|🍇|🍈|🍉|🍊|🍋|🍌|🍍|🥭|🍎|🍏|🍐|🍑|🍒|🍓|🫐|🥝|🍅|🫒|🥥|🥑|🍆|🥔|🥕|🌽|🫑|🥒|🥬|🥦|🧄|🧅|🍄|🥜|🌰|🍞|🥐|🥖|🫓|🥨|🥯|🥞|🧇|🧀|🍖|🍗|🥩|🥓|🍔|🍟|🍕|🌭|🥪|🌮|🌯|🫔|🥙|🧆|🥚|🍳|🥘|🍲|🫕|🥣|🥗|🍿|🧈|🧂|🥫|🍱|🍘|🍙|🍚|🍛|🍜|🍝|🍠|🍢|🍣|🍤|🍥|🥮|🍡|🥟|🥠|🥡|🦀|🦞|🦐|🦑|🦪|🍦|🍧|🍨|🍩|🍪|🎂|🍰|🧁|🥧|🍫|🍬|🍭|🍮|🍯|🍼|🥛|🫖|🍵|🍶|🍾|🍷|🍸|🍹|🍺|🍻|🥂|🥃|🥤|🧋|🧃|🧉|🧊|🥢|🍴|🥄|🔪|🏺|🌍|🌎|🌏|🌐|🗾|🧭|🌋|🗻|🧱|🪨|🪵|🛖|🏠|🏡|🏢|🏣|🏤|🏥|🏦|🏨|🏩|🏪|🏫|🏬|🏭|🏯|🏰|💒|🗼|🗽|🕌|🛕|🕍|🕋|🌁|🌃|🌄|🌅|🌆|🌇|🌉|🎠|🎡|🎢|💈|🎪|🚂|🚃|🚄|🚅|🚆|🚇|🚈|🚉|🚊|🚝|🚞|🚋|🚌|🚍|🚎|🚐|🚑|🚒|🚓|🚔|🚕|🚖|🚗|🚘|🚙|🛻|🚚|🚛|🚜|🛵|🦽|🦼|🛺|🚲|🛴|🛹|🛼|🚏|🚨|🚥|🚦|🛑|🚧|🛶|🚤|🚢|🛫|🛬|🪂|💺|🚁|🚟|🚠|🚡|🚀|🛸|🧳|🕛|🕧|🕐|🕜|🕑|🕝|🕒|🕞|🕓|🕟|🕔|🕠|🕕|🕡|🕖|🕢|🕗|🕣|🕘|🕤|🕙|🕥|🕚|🕦|🌑|🌒|🌓|🌔|🌕|🌖|🌗|🌘|🌙|🌚|🌛|🌜|🌝|🌞|🪐|🌟|🌠|🌌|🌀|🌈|🌂|🔥|💧|🌊|🎃|🎄|🎆|🎇|🧨|🎈|🎉|🎊|🎋|🎍|🎎|🎏|🎐|🎑|🧧|🎀|🎁|🎫|🏆|🏅|🥇|🥈|🥉|🥎|🏀|🏐|🏈|🏉|🎾|🥏|🎳|🏏|🏑|🏒|🥍|🏓|🏸|🥊|🥋|🥅|🎣|🤿|🎽|🎿|🛷|🥌|🎯|🪀|🪁|🎱|🔮|🪄|🧿|🎮|🎰|🎲|🧩|🧸|🪅|🪆|🃏|🀄|🎴|🎭|🎨|🧵|🪡|🧶|🪢|👓|🥽|🥼|🦺|👔|👕|👖|🧣|🧤|🧥|🧦|👗|👘|🥻|🩱|🩲|🩳|👙|👚|👛|👜|👝|🎒|🩴|👞|👟|🥾|🥿|👠|👡|🩰|👢|👑|👒|🎩|🎓|🧢|🪖|📿|💄|💍|💎|🔇|🔈|🔉|🔊|📢|📣|📯|🔔|🔕|🎼|🎵|🎶|🎤|🎧|📻|🎷|🪗|🎸|🎹|🎺|🎻|🪕|🥁|🪘|📱|📲|📞|📟|📠|🔋|🔌|💻|💽|💾|💿|📀|🧮|🎥|🎬|📺|📷|📸|📹|📼|🔍|🔎|💡|🔦|🏮|🪔|📔|📕|📖|📗|📘|📙|📚|📓|📒|📃|📜|📄|📰|📑|🔖|💰|🪙|💴|💵|💶|💷|💸|💳|🧾|💹|📧|📨|📩|📤|📥|📦|📫|📪|📬|📭|📮|📝|💼|📁|📂|📅|📆|📇|📈|📉|📊|📋|📌|📍|📎|📏|📐|🔒|🔓|🔏|🔐|🔑|🔨|🪓|🔫|🪃|🏹|🪚|🔧|🪛|🔩|🦯|🔗|🪝|🧰|🧲|🪜|🧪|🧫|🧬|🔬|🔭|📡|💉|🩸|💊|🩹|🩺|🚪|🛗|🪞|🪟|🪑|🚽|🪠|🚿|🛁|🪤|🪒|🧴|🧷|🧹|🧺|🧻|🪣|🧼|🪥|🧽|🧯|🛒|🚬|🪦|🗿|🪧|🏧|🚮|🚰|🚹|🚺|🚻|🚼|🚾|🛂|🛃|🛄|🛅|🚸|🚫|🚳|🚭|🚯|🚱|🚷|📵|🔞|🔃|🔄|🔙|🔚|🔛|🔜|🔝|🛐|🕎|🔯|🔀|🔁|🔂|🔼|🔽|🎦|🔅|🔆|📶|📳|📴|💱|💲|🔱|📛|🔰|🔟|🔠|🔡|🔢|🔣|🔤|🆎|🆑|🆒|🆓|🆔|🆕|🆖|🆗|🆘|🆙|🆚|🈁|🈶|🈯|🉐|🈹|🈚|🈲|🉑|🈸|🈴|🈳|🈺|🈵|🔴|🟠|🟡|🟢|🔵|🟣|🟤|🟥|🟧|🟨|🟩|🟦|🟪|🟫|🔶|🔷|🔸|🔹|🔺|🔻|💠|🔘|🔳|🔲|🏁|🚩|🎌|🏴|🏻|🏼|🏽|🏾|🏿|✋|✊|☕|⛪|⛲|⛺|⛽|⚓|⛵|⌛|⏳|⌚|⏰|⭐|⛅|☔|⚡|⛄|✨|⚽|⚾|⛳|♿|⛔|♈|♉|♊|♋|♌|♍|♎|♏|♐|♑|♒|♓|⛎|⏩|⏪|⏫|⏬|➕|➖|➗|‼|⁉|❓|❔|❕|❗|〰|⭕|✅|❌|❎|➰|➿|〽|Ⓜ|⚫|⚪|⬛|⬜|◾|◽"
    )

    // this is the equivalent of [[:punct:]] according to wikipedia (minus the quotes). I added the quotes after testing on dev.to.
    private val punctuationRegex = Regex("[!\"#$%&'()*+,./:;<=>?@\\[\\]^_`{|}~՚Ꞌ′″‴〃-]")


    override fun toAnchor(title: String): String = title
        .lowercase()
        // HTML in `` are escaped (we thus end with extra "lt" and "gt" in the anchor), but not removed completely
        .transformInlineCode { it.escapeHtmlEntities() }
        // other HTML tags <*> are removed
        .stripHtmlTags()
        // for markdown links [a](b), only the text "a" part is kept
        .stripMarkdownLinks()
        // devto transforms <, >, & into &lt; &gt; and &amp; before stripping punctuation -> lt, gt, amp
        .escapeHtmlEntities()
        // only common emojis without text representation are removed
        .replace(removedEmojisRegex, "")
        // weirdly enough, the trim is done before removing punctuation
        .trim()
        // backticks become "-raw-" / "-endraw-"
        // beware though: if an unclosed backtick is found before the title, it messes up the order!
        // let's assume people write good markdown...
        .replaceBackTicksWithRawMarker()
        // finally, punctuation characters are removed
        .replace(punctuationRegex, "")
        // and spaces converted to dashes (+ consecutive spaces are merged into one, but this is done by the calling function)
        .spacesToDash()

    private fun String.replaceBackTicksWithRawMarker(): String {
        var num = 0
        return map {
            if (it == '`') {
                if (num++ % 2 == 0) " raw " else " endraw "// don't use "-" since they are stripped later
            } else it
        }.joinToString("")
    }

    private fun String.escapeHtmlEntities() = this
        // don't use "&;" since this function can be called twice !
        .replace("&", "amp")
        .replace("<", "lt")
        .replace(">", "gt")
}

private val codeRegex = Regex("`(.*?)`")
internal fun String.transformInlineCode(transform: (String) -> String) =
    codeRegex.findAll(this).fold(this) { acc, match ->
        val insideText = match.groupValues[1]
        acc.replace(match.value, "`${transform(insideText)}`")
    }


private val spacesRegex = Regex("\\s")
internal fun String.spacesToDash() =
    replace(spacesRegex, "-")


private val htmlTagsRegex = Regex("<.*?>")
internal fun String.stripHtmlTags() =
    replace(htmlTagsRegex, "")


private val markdownLinkRegex = Regex("\\[([^\\]]*)\\]\\([^)]*\\)")
internal fun String.stripMarkdownLinks() =
    replace(markdownLinkRegex, "$1")


private val concatRegex = Regex("--+")
internal fun String.concatSpaces() =
    replace(concatRegex, "-")
